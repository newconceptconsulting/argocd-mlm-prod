replicaCount: 1

env:
  KONG_DATABASE: "off"
  KONG_DECLARATIVE_CONFIG: "/kong/declarative/kong.yml"
  KONG_PROXY_ACCESS_LOG: "/dev/stdout"
  KONG_PROXY_ERROR_LOG: "/dev/stderr"
  KONG_ADMIN_ACCESS_LOG: "/dev/stdout"
  KONG_ADMIN_ERROR_LOG: "/dev/stderr"
  KONG_ADMIN_LISTEN: "0.0.0.0:8444 ssl"
  KONG_PROXY_LISTEN: "0.0.0.0:8000,0.0.0.0:8443 http2 ssl"
  KONG_STATUS_LISTEN: "0.0.0.0:8100"

admin:
  enabled: true
  http:
    enabled: true
    host: 0.0.0.0
    port: 8444
  tls:
    enabled: true

proxy:
  type: LoadBalancer
  http:
    enabled: true
    servicePort: 80
    containerPort: 8000
  tls:
    enabled: true
    servicePort: 443
    containerPort: 8443
    existingSecret: mlm.nccnaga.com-tls
    externalTrafficPolicy: Local

ingressController:
  enabled: true
  ingressClass: kong
  installCRDs: false
  publishService:
    enabled: true
  replicaCount: 1
  containerSecurityContext:
    runAsUser: 101
    runAsNonRoot: true
  admissionWebhooks:
    enabled: false
  env:
    CONTROLLER_KONG_ADMIN_TLS_SKIP_VERIFY: "true"

resources:
  requests:
    memory: 2Gi
    cpu: 1
  limits:
    memory: 2Gi
    cpu: 1

initContainers:
  clearStalePid:
    resources:
      requests:
        memory: 512Mi
        cpu: 0.1
      limits:
        memory: 512Mi
        cpu: 0.1
